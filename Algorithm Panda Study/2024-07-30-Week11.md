# 알고리즘 스터디 11주차
최단 거리를 구하는 알고리즘에는
* 다익스티라
* 벨만 포드
* 플로이드 워셜

이렇게 3가지가 있다.

## 벨만 포드 알고리즘
벨만 포드 알고리즘: 그래프에서 최단 거리를 구하는 알고리즘
<br>

기능: 특정 출발 노드에서 다른 모든 노드까지의 최단 경로를 탐색(디익스트라와 동일)
<br><br>
음수 가중치가 제일 중요한 특징이다.
음수 가중치가 있는데 최단거리를 구한다면 벨만 포드를 사용해야한다.
전체 그래프에서 음수 사이클의 존재 여부를 판단하는데에도 벨만 포드를 사용한다.
<br><br>
시간복잡도: O(VE)


### 밸만 포드 알고리즘의 핵심이론
벨만-포드 아록리즘은 다음 3가지 단계의 원리로 동작한다.

#### 1. 에지 리스트로 그래프를 구혆고 최단 경로 리스트 초기화하기
에지를 중심으로 동작하므로 그래프를 에지 리스트로 구현한다.
최단 경로 리스트(아래 사진의 정답 리스트 형태)를 출발 노드는 0, 나머지 노드는 무한대로 초기화해준다.

![image](https://github.com/user-attachments/assets/d58b2bbc-c025-4954-ad07-7ad12cde7346)

그림의 그래프 에지 리스트를 해석하자면 엣지 1번은 1번에서 출발하여 2번으로 가는 가중치 8의 에지를 의미하는 것이다.

에지 리스트는 출발노드(start)와 종료노드(end), 노드 변수 2개와 가중치 변수(w or v)로 구성되어있다.
<br>

#### 2. 모든 에지를 확인해 정답 리스트를 업데이트하기
최단 거리 리스트에서 업데이트 반복 횟수는 (노드 개수 -1)이다. (최악의 경우에도)
노드의 개수가 N이고 음수 사이클이 없을 때 특정 두 노드의 최단 거리를 구성할 수 있는 에지의 최대 갯수는 N -1이기 때문이다.

|![image](https://github.com/user-attachments/assets/6de11109-cd27-4b7e-926c-99792ec23183)|![image](https://github.com/user-attachments/assets/fc5f45c5-3efa-4854-b081-c40fd3648879)|
|-------|-------|
|노드 5개, 최단 거리 4|하나를 추가하는 순간 사이클이 생김|


모든 에지 E = (s,e,w)에서 다음 조건을 만족하면 업데이트를 실행한다.
업데이트 반복 횟수가 K번이라면 해당 시점에 정답 리스트의 값은 시작접에서 K개의 에지를 사용했을 때 각 노드에 대한 최단 거리이다.

![image](https://github.com/user-attachments/assets/b208cd38-9ab5-42cf-8fa2-0a0898025bd4)

1. 출발 노드가 무한대가 아님 ➡️ 출발
2. 1번 에지 검토: D[1] + 8 < D[2] ➡️ D[2] = 8
3. 8이 저장되었으므로 2번 노드도 무한대가 아니므로 쭉쭉 출발가능
4. 3번 에지도 위와 같은 과정을 거처 D[3] = 3이됨

따라서 에지를 한번 사용하면 2, 3번 노드가 8과 3으로 바뀜

![image](https://github.com/user-attachments/assets/8b785d1d-744e-43e7-b002-466b06e3dfbe)

<br>
따라서 음수 사이클이 없을 때 N-1번 에지 사용 횟수를 반복하면 출발 노드와 모든 노드 간의 최단 거리를 알려주는 정답 리스트가 완성된다.
완성된 후 이 그래프에 음수 사이클이 존재하는지 확인해야한다.
<br>

#### 3.음수 사이클 유무 확인하기
모든 에지를 한 번씩 다시 사용해 업데이트되는 노드가 발생하는지 확인한다.
만약 업데이트 되는 노드가 있다면 음수사이클이 잇다는 뜻이 되고 2단계에서 도출한 정답 리스트가 무의미하고 최단 거리를 찾을 수 없는 그래프라는 뜻이 된다.
음수 사이클이 존재하면 돌수록 가중치가 계속 감소하기 때문에 최단 거리를 구할 수 없다.

<br>

## 플로이드 워셜 알고리즘
그래프에서 최단 거리를 구한 알고리즘 중 하나
<br><br>
기능: 모든 노드 간에 최단 경로 탐색

따라서 시간 복잡도도 O(V^3)으로 느린 편이다.
<br><br>
음수 가중치 에지가 있어도 수행할 수 있다는 점, 동적 계획법의 원리를 이용해 알고리즘에 접근할 수 있는 점이 특징이다.

보통 노드가 200개, 100,개 정도 될 때 플루이드 워셜이 나오게 되어있다. (유추해볼 수 있음)

### 플로이드-워셜의 핵심이론
삼중 for문으로 이루어진 굉장히 짧다는 점이 특징이다.

플로이-워셜 알고리즘ㅇ르 도출하는 가장 핵심적인 원리는 A노드에서 B노드까지 최단 경로를 구한다고 가정했을 때, 최단 경로 위에 K노드가 존재한다면 그것을 이루는 부분 경로 역시 최단 경로라는 것이다.
전체 경로의 최단 경로는 부분 경로의 최단 경로의 조합으로 이루어진다는 것

 ![image](https://github.com/user-attachments/assets/35d0a738-5d64-41dd-aa24-d129a6da7880)

 #### 1. 리스트를 선언하고 초기화하기
 2차원 배열의 최단 거리 리스트 생성

 ![image](https://github.com/user-attachments/assets/eb9d1240-bb00-43df-8491-09d97b3a704f)
<br>

#### 2. 최단 거리 리스트에 그래프 데이터 저장하기
D[S][E] = W로 정보를 입력

![image](https://github.com/user-attachments/assets/c4bc6d83-b623-4e43-861c-2da39885fba8)

D[5][4] = 5
<br>

#### 3. 점화식으로 리스트 업데이트 하기
기존에 구했던 점화식을 3중 for문의 형태로 반복하며 리스트의 값을 없데이트

![image](https://github.com/user-attachments/assets/b20510b3-e2ac-4b2a-9f1e-b3393382ba8e)

다른 모든 경유지를 통과한 값이 지금 SE값보다 작으면 업데이트

<br>

## 최소 신장 트리
최소 신장 트리: 그래프에서 모든 노드를 연결할 때 사용된 에지들의 가중치의 합을 최소로하는 트리
<br>

특징

* 사이틀이 포함되면 가중치의 합이 최소가 될 수 없으므로 사이클을 포함하지 않는다.
* N개의 노드가 있으면 최소 신장 크리를 구성하는 에지의 개수는 항상 N-1이다.

사이클이 형성되면 하나의 경로를 제거하더라도 나머지 모든 노드들과 연결됨
<br>

### 최소 신장 트리의 핵심 이론
#### 1. 에지 리스트로 그패르를 구현하고 유니온 파인드 리스트로 초기화하기
최소 신장 트리는 데이터를 노드가 아닌 에지 중심으로 저장하므로 인접 리스트가 아닌 에지 리스트의 형태(노드 변수 2개, 가중치 변수)로 저장한다.
사이클 처리를 위한 유니온 파인드 리스트도 함께 초기화한다.

![image](https://github.com/user-attachments/assets/413ef674-4d6f-4dcc-92f0-e23ac180a65b)
<br>

#### 2. 그래프 데이터를 가중치 기준으로 정렬하기
에지 리스트에 담긴 그래프 데이터를 가중치 기준으로 오름차순 정렬  

![image](https://github.com/user-attachments/assets/577e3e32-7a71-49df-91e8-453d031ca0b5)
<br>

#### 3. 가중치가 낮은 에지부터 연결 시도하기
이때 바로 연결하지 않고 이 에지를 연결했을 때 그래프에 사이클 형성 유무를 find 연산ㅇ르 이용해 확인 후 사이클 형성이 되지 않을 때만 union 연산을 이용해 두 노드를 연결

![image](https://github.com/user-attachments/assets/1596dfe1-07eb-480e-9fed-af2bb6e52bde)
<br>

#### 4. 과정 3 반복하기

![image](https://github.com/user-attachments/assets/81df2f7c-b54b-4f4c-995e-1c10fcbf5217)

#### 5. 총 에지 비용 출력하기


에지 리스트의 형태를 이요해 데이터를 담기 때문에 낯설 수 있다.